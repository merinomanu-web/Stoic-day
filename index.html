<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Frases Estoicas">
<meta name="theme-color" content="#f5f5f7">
<title>Frases Estoicas</title>
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icons/icon-180.png">
   <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        background: linear-gradient(135deg, #f5f5f7 0%, #e8e8ea 50%, #d1d1d6 100%);
        min-height: 100vh;
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
    }

    .app-container {
        max-width: 600px;
        margin: 0 auto;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }

    .content {
        flex: 1;
        padding: 80px 24px 100px;
    }

    .header {
        margin-bottom: 48px;
    }

    .day-text {
        font-size: 40px;
        font-weight: 700;
        color: #1a1a1a;
        letter-spacing: -0.5px;
        margin-bottom: 8px;
    }

    .subtitle {
        font-size: 17px;
        color: #666666;
        font-weight: 500;
    }

    .quote-card {
        background-color: #ffffff;
        border: 2px solid #000000;
        border-radius: 24px;
        padding: 32px;
        margin-bottom: 32px;
        min-height: 280px;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .quote-text {
        font-size: 22px;
        line-height: 32px;
        color: #1a1a1a;
        margin-bottom: 24px;
    }

    .author-text {
        font-size: 16px;
        color: #666666;
        font-weight: 600;
        font-style: italic;
    }

    .actions {
        display: flex;
        justify-content: center;
        gap: 16px;
    }

    .action-button {
        width: 72px;
        height: 72px;
        border-radius: 36px;
        background: rgba(255, 255, 255, 0.75);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .action-button:active {
        transform: scale(0.95);
        opacity: 0.7;
    }

    .heart-icon {
        width: 28px;
        height: 28px;
        stroke: #1a1a1a;
        fill: none;
        stroke-width: 2;
        transition: all 0.2s;
    }

    .heart-icon.favorited {
        fill: #ff3b30;
        stroke: #ff3b30;
    }

    .share-icon {
        width: 28px;
        height: 28px;
        stroke: #1a1a1a;
        stroke-width: 2;
        fill: none;
    }

    .tabs {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-top: 1px solid rgba(0, 0, 0, 0.1);
        display: flex;
        justify-content: space-around;
        padding: 12px 0 calc(12px + env(safe-area-inset-bottom));
        z-index: 1000;
    }

    .tab-button {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 4px;
        padding: 8px;
        background: none;
        border: none;
        cursor: pointer;
        color: #999999;
        font-size: 12px;
        font-weight: 500;
        transition: color 0.2s;
    }

    .tab-button.active {
        color: #1a1a1a;
    }

    .tab-icon {
        width: 24px;
        height: 24px;
        stroke-width: 2;
    }

    .screen {
        display: none;
    }

    .screen.active {
        display: block;
    }

    .favorites-list {
        display: flex;
        flex-direction: column;
        gap: 16px;
    }

    .favorite-card {
        background-color: #ffffff;
        border: 2px solid #000000;
        border-radius: 20px;
        padding: 20px;
    }

    .favorite-card .quote-text {
        font-size: 16px;
        line-height: 24px;
        margin-bottom: 12px;
    }

    .favorite-card .author-text {
        font-size: 14px;
        margin-bottom: 16px;
    }

    .card-actions {
        display: flex;
        justify-content: flex-end;
        gap: 12px;
    }

    .icon-button {
        width: 40px;
        height: 40px;
        border-radius: 20px;
        background: rgba(255, 255, 255, 0.5);
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: opacity 0.2s;
    }

    .icon-button:active {
        opacity: 0.6;
    }

    .small-icon {
        width: 20px;
        height: 20px;
        stroke-width: 2;
    }

    .trash-icon {
        stroke: #ff3b30;
    }

    .empty-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 120px;
        text-align: center;
    }

    .empty-icon {
        width: 64px;
        height: 64px;
        stroke: #cccccc;
        stroke-width: 1.5;
        margin-bottom: 24px;
    }

    .empty-title {
        font-size: 24px;
        font-weight: 600;
        color: #1a1a1a;
        margin-bottom: 12px;
    }

    .empty-subtitle {
        font-size: 16px;
        color: #666666;
        line-height: 24px;
        max-width: 280px;
    }
</style>
</head>
<body>
<div class="app-container">
    <div id="today-screen" class="screen active">
        <div class="content">
            <div class="header">
                <div class="day-text" id="day-name"></div>
                <div class="subtitle">Tu frase estoica del día</div>
            </div>

            <div class="quote-card">
                <div class="quote-text" id="quote-text"></div>
                <div class="author-text" id="quote-author"></div>
            </div>

            <div class="actions">
                <button class="action-button" id="favorite-btn">
                    <svg class="heart-icon" id="heart-icon" viewBox="0 0 24 24">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                </button>
                <button class="action-button" id="share-btn">
                    <svg class="share-icon" viewBox="0 0 24 24" fill="none">
                        <circle cx="18" cy="5" r="3"></circle>
                        <circle cx="6" cy="12" r="3"></circle>
                        <circle cx="18" cy="19" r="3"></circle>
                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <div id="favorites-screen" class="screen">
        <div class="content">
            <div class="header">
                <div class="day-text">Favoritos</div>
                <div class="subtitle" id="favorites-count"></div>
            </div>
            <div id="favorites-list" class="favorites-list"></div>
        </div>
    </div>

    <div class="tabs">
        <button class="tab-button active" data-tab="today">
            <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            <span>Hoy</span>
        </button>
        <button class="tab-button" data-tab="favorites">
            <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
            <span>Favoritos</span>
        </button>
    </div>
</div>

<script>
    const stoicQuotes = [
        { id: '1', text: 'Tienes poder sobre tu mente, no sobre los eventos externos. Date cuenta de esto y encontrarás fuerza.', author: 'Marco Aurelio', dayOfWeek: 1 },
        { id: '2', text: 'El hombre sabio es aquel que no se aflige por las cosas que no tiene, sino que se regocija por las que tiene.', author: 'Epicteto', dayOfWeek: 1 },
        { id: '3', text: 'La riqueza consiste no en tener grandes posesiones, sino en tener pocas necesidades.', author: 'Epicteto', dayOfWeek: 1 },
        { id: '4', text: 'No te expliques. Tus amigos no lo necesitan y tus enemigos no te creerán.', author: 'Séneca', dayOfWeek: 2 },
        { id: '5', text: 'El que teme sufrir, ya sufre por lo que teme.', author: 'Michel de Montaigne', dayOfWeek: 2 },
        { id: '6', text: 'Comienza cada día diciéndote: hoy me encontraré con personas entrometidas, ingratas, arrogantes, deshonestas, celosas e insociables.', author: 'Marco Aurelio', dayOfWeek: 2 },
        { id: '7', text: 'Lo mejor para vengarse de tu enemigo es no parecerte a él.', author: 'Marco Aurelio', dayOfWeek: 3 },
        { id: '8', text: 'No es el hombre que tiene muy poco, sino el hombre que desea más, el que es pobre.', author: 'Séneca', dayOfWeek: 3 },
        { id: '9', text: 'El verdadero placer es la ausencia de deseo.', author: 'Epicteto', dayOfWeek: 3 },
        { id: '10', text: 'Nunca dejes que el futuro te perturbe. Lo enfrentarás con las mismas armas de razón con las que hoy enfrentas el presente.', author: 'Marco Aurelio', dayOfWeek: 4 },
        { id: '11', text: 'Las dificultades fortalecen la mente, así como el trabajo fortalece el cuerpo.', author: 'Séneca', dayOfWeek: 4 },
        { id: '12', text: 'No busques que los acontecimientos sucedan como tú quieres, sino desea que sucedan como suceden y serás feliz.', author: 'Epicteto', dayOfWeek: 4 },
        { id: '13', text: 'La felicidad de tu vida depende de la calidad de tus pensamientos.', author: 'Marco Aurelio', dayOfWeek: 5 },
        { id: '14', text: 'No podemos controlar el viento pero podemos ajustar las velas.', author: 'Epicteto', dayOfWeek: 5 },
        { id: '15', text: 'El tiempo es como un río hecho de eventos, y su corriente es fuerte. Tan pronto como algo aparece, es arrastrado.', author: 'Marco Aurelio', dayOfWeek: 5 },
        { id: '16', text: 'La fortuna ayuda a los valientes.', author: 'Séneca', dayOfWeek: 6 },
        { id: '17', text: 'No pierdas más tiempo discutiendo sobre lo que un buen hombre debería ser. Sé uno.', author: 'Marco Aurelio', dayOfWeek: 6 },
        { id: '18', text: 'Mientras vivas, mientras sea posible, sé bueno.', author: 'Marco Aurelio', dayOfWeek: 6 },
        { id: '19', text: 'No es que tengamos poco tiempo, sino que perdemos mucho.', author: 'Séneca', dayOfWeek: 0 },
        { id: '20', text: 'La vida no se trata de encontrarte a ti mismo, sino de crearte a ti mismo.', author: 'Marco Aurelio', dayOfWeek: 0 },
        { id: '21', text: 'El obstáculo es el camino.', author: 'Marco Aurelio', dayOfWeek: 0 }
    ];

    const FAVORITES_KEY = 'stoic_favorites';
    let currentQuote = null;

    function getDayName() {
        const days = ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'];
        return days[new Date().getDay()];
    }

    function getTodayQuote() {
        const today = new Date();
        const dayOfWeek = today.getDay();
        const quotesForToday = stoicQuotes.filter(q => q.dayOfWeek === dayOfWeek);
        
        if (quotesForToday.length === 0) return stoicQuotes[0];
        
        const seed = Math.floor(today.getTime() / (1000 * 60 * 60 * 24));
        const index = seed % quotesForToday.length;
        
        return quotesForToday[index];
    }

    function getFavorites() {
        const stored = localStorage.getItem(FAVORITES_KEY);
        return stored ? JSON.parse(stored) : [];
    }

    function saveFavorites(favorites) {
        localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));
    }

    function isFavorite(quoteId) {
        const favorites = getFavorites();
        return favorites.some(f => f.id === quoteId);
    }

    function addFavorite(quote) {
        const favorites = getFavorites();
        favorites.push(quote);
        saveFavorites(favorites);
    }

    function removeFavorite(quoteId) {
        const favorites = getFavorites();
        const updated = favorites.filter(f => f.id !== quoteId);
        saveFavorites(updated);
    }

    function updateTodayScreen() {
        currentQuote = getTodayQuote();
        document.getElementById('day-name').textContent = getDayName();
        document.getElementById('quote-text').textContent = currentQuote.text;
        document.getElementById('quote-author').textContent = `— ${currentQuote.author}`;
        
        const heartIcon = document.getElementById('heart-icon');
        if (isFavorite(currentQuote.id)) {
            heartIcon.classList.add('favorited');
        } else {
            heartIcon.classList.remove('favorited');
        }
    }

    function updateFavoritesScreen() {
        const favorites = getFavorites();
        const count = favorites.length;
        document.getElementById('favorites-count').textContent = 
            `${count} ${count === 1 ? 'frase guardada' : 'frases guardadas'}`;
        
        const listContainer = document.getElementById('favorites-list');
        
        if (favorites.length === 0) {
            listContainer.innerHTML = `
                <div class="empty-state">
                    <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                    <div class="empty-title">No tienes favoritos aún</div>
                    <div class="empty-subtitle">Guarda tus frases favoritas para acceder a ellas en cualquier momento</div>
                </div>
            `;
        } else {
            listContainer.innerHTML = favorites.map(quote => `
                <div class="favorite-card">
                    <div class="quote-text">${quote.text}</div>
                    <div class="author-text">— ${quote.author}</div>
                    <div class="card-actions">
                        <button class="icon-button" onclick="shareQuote('${quote.id}')">
                            <svg class="small-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="18" cy="5" r="3"></circle>
                                <circle cx="6" cy="12" r="3"></circle>
                                <circle cx="18" cy="19" r="3"></circle>
                                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                            </svg>
                        </button>
                        <button class="icon-button" onclick="deleteFavorite('${quote.id}')">
                            <svg class="small-icon trash-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            `).join('');
        }
    }

    async function shareQuote(quoteId) {
        const quote = quoteId === 'current' 
            ? currentQuote 
            : getFavorites().find(f => f.id === quoteId);
        
        if (!quote) return;
        
        const message = `"${quote.text}"\n\n— ${quote.author}`;
        
        if (navigator.share) {
            try {
                await navigator.share({
                    text: message
                });
            } catch (err) {
                console.log('Share cancelled or failed:', err);
            }
        } else {
            alert('Compartir: ' + message);
        }
    }

    window.deleteFavorite = function(quoteId) {
        removeFavorite(quoteId);
        updateFavoritesScreen();
        updateTodayScreen();
    };

    window.shareQuote = shareQuote;

    document.getElementById('favorite-btn').addEventListener('click', () => {
        if (isFavorite(currentQuote.id)) {
            removeFavorite(currentQuote.id);
        } else {
            addFavorite(currentQuote);
        }
        updateTodayScreen();
        updateFavoritesScreen();
    });

    document.getElementById('share-btn').addEventListener('click', () => {
        shareQuote('current');
    });

    document.querySelectorAll('.tab-button').forEach(button => {
        button.addEventListener('click', () => {
            const tab = button.dataset.tab;
            
            document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
            button.classList.add('active');
            
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(`${tab}-screen`).classList.add('active');
            
            if (tab === 'favorites') {
                updateFavoritesScreen();
            }
        });
    });

    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').catch(err => {
            console.log('Service Worker registration failed:', err);
        });
    }

    updateTodayScreen();
</script>
</body>
</html>
